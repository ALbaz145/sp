# Arquitectura cliente-servidor en MQTT: análisis del rol del broker y los clientes

La arquitectura de **MQTT** se basa en un modelo cliente-servidor que adopta el patrón de publicación y suscripción. En este esquema, el **broker** funciona como servidor central encargado de recibir todos los mensajes que envían los clientes, clasificarlos de acuerdo con los *topics* definidos y entregarlos a los suscriptores correspondientes. A diferencia de la comunicación directa entre pares, los clientes nunca interactúan entre sí de manera explícita; todo pasa a través del broker. Esta centralización simplifica la comunicación y la hace más eficiente en entornos con muchos dispositivos distribuidos.

El **rol del broker** es fundamental para el correcto funcionamiento del sistema. Su tarea principal es filtrar y distribuir los mensajes, garantizando que cada cliente reciba únicamente la información que le interesa. Además, el broker gestiona aspectos críticos como la persistencia de las sesiones, el almacenamiento de mensajes para clientes desconectados y la aplicación de políticas de autenticación y autorización. En implementaciones más avanzadas, el broker también ofrece soporte para balanceo de carga y clustering, lo que permite escalar la arquitectura hacia millones de conexiones concurrentes sin perder confiabilidad. Por tanto, el broker se convierte en el núcleo de la red de comunicación MQTT.

Por otro lado, los **clientes** representan todos los dispositivos o aplicaciones que participan en la comunicación. Un mismo cliente puede asumir dos funciones distintas según el contexto: actuar como *publisher* (publicador) enviando datos a un *topic*, o como *subscriber* (suscriptor) recibiendo la información publicada en los temas de interés. Esta dualidad hace que un mismo dispositivo pueda desempeñar múltiples papeles de forma flexible, lo cual es especialmente útil en el ámbito del Internet de las Cosas (IoT). Además, los clientes son responsables de elegir parámetros como el nivel de calidad de servicio (QoS), el uso de mensajes retenidos o el establecimiento de un mensaje de última voluntad en caso de desconexiones abruptas.

La interacción entre broker y clientes ilustra la naturaleza distribuida y desacoplada del modelo pub/sub. Los clientes solo necesitan conocer la dirección del broker para integrarse en el sistema, lo que elimina la necesidad de conexiones directas entre dispositivos. Este desacoplamiento no solo mejora la escalabilidad y la tolerancia a fallos, sino que también facilita el diseño de sistemas heterogéneos donde conviven sensores, aplicaciones móviles, servidores en la nube y dispositivos embebidos. Así, la arquitectura cliente-servidor en MQTT permite una comunicación ligera, flexible y confiable, adecuada para escenarios donde los recursos y el ancho de banda son limitados.
